<div class="header">
	<h2 mat-dialog-title>Buy Ticket</h2>

	<!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->
	<button class="btn" [mat-dialog-close]="true">
		<i class="fa fa-times"></i>
	</button>
</div>

<mat-dialog-content class="content">
	<!--	
		select ticket by event 

		select by date

		clubs/bars always have tickets, one off events not so much
	-->

	<div class="purchaseMethod">
		<button mat-button mat-button-raised (click)="date = false">By Event</button>
		<button mat-button mat-button-raised (click)="date = true">By Date</button>
	</div>

	<div class="select_by_event" *ngIf="events && !date">
		
		<label>Choose Event</label>
		<mat-select placeholder="Pick event" [(value)]="selected">
			<mat-option *ngFor="let event of events" [value]="event">{{event.payload.val().name}}</mat-option>
		</mat-select>

		<div *ngIf="events.length === 0" class="no_upcoming_events">

			<span>Venue currently has no upcoming events</span>

			<button class="btn" (click)="date = true">Buy By Date Instead</button>
		</div>
	</div>

	<div class="form-group" *ngIf="date">
		<label>Event Date</label>
		<input type="date" name="date">
	</div>

	<div class="card cart">
		<div class="card-header">Order Summary</div>

		<div class="card-body">
			<div class="price" *ngIf="selected"><i>Ticket Price: </i> ${{selected.payload.val().ticketPrice}}</div>
			<div class="date" *ngIf="selected"><i>Date: </i> {{selected.payload.val().date | date:mediumDate}}</div>
		</div>
	</div>
</mat-dialog-content>

<mat-spinner *ngIf="loading"></mat-spinner>

<mat-dialog-actions>
  <button class="btn btn-danger" mat-dialog-close>Cancel</button>
  
  <button class="btn sub_btn" (click)="buyTicket(selected.payload.val().ticketPrice)">Submit</button>
</mat-dialog-actions>
